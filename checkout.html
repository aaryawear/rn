<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Secure Checkout ‚Ä¢ Rozana Needs</title>

<style>
:root{
  --bg:#f5f7fb;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#64748b;
  --brand:#000;
  --accent:#16a34a;
  --radius:16px;
}

*{box-sizing:border-box}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:var(--bg);color:var(--text)}

header{
  background:#000;color:#fff;padding:12px;text-align:center;font-weight:600;
}

.trust{
  background:#fff;display:flex;gap:10px;justify-content:space-around;
  padding:8px;border-bottom:1px solid #e5e7eb;font-size:12px;color:#111;
}

.wrap{max-width:440px;margin:auto;padding:12px 12px 90px}

.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
}

.summary{
  background:#f8fafc;border-radius:12px;padding:12px;margin-bottom:12px
}
.summary h3{margin:0 0 6px;font-size:16px}
.price{font-size:22px;font-weight:800;color:var(--accent)}
.orderid{font-size:12px;color:var(--muted)}

.field{margin-bottom:10px}
.field input{
  width:100%;padding:13px 14px;border-radius:12px;border:1px solid #d1d5db;
  font-size:14px;
}

.section-title{font-size:14px;font-weight:600;margin:12px 0 6px}

.paycard{
  border:1px solid #e5e7eb;border-radius:14px;padding:10px;margin-bottom:8px;
  display:flex;align-items:center;gap:10px;
}
.paycard img{width:44px;height:44px;border-radius:8px}
.paycard b{font-size:14px}
.paycard small{display:block;color:var(--muted)}

.trustbox{
  margin-top:10px;background:#f8fafc;border-radius:12px;padding:10px;
  font-size:12px;color:#334155
}

/* Sticky bottom bar */
.bottom{
  position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid #e5e7eb;
  padding:10px;display:flex;gap:10px;align-items:center;
}
.bottom .total{flex:1}
.bottom .total b{font-size:18px}
.bottom button{
  flex:1;padding:14px;border:none;border-radius:14px;background:#000;color:#fff;font-size:16px;
}

button:disabled{opacity:.6}

/* Loader overlay */
.overlay{
  position:fixed;inset:0;background:rgba(255,255,255,.9);display:none;
  align-items:center;justify-content:center;flex-direction:column;gap:10px;z-index:50
}
.loader{
  border:4px solid #eee;border-top:4px solid #000;border-radius:50%;
  width:36px;height:36px;animation:spin 1s linear infinite
}
@keyframes spin{100%{transform:rotate(360deg)}}

footer{text-align:center;font-size:12px;color:#6b7280;padding:12px}
</style>
</head>

<body>

<header>üîí Secure Checkout ‚Äî Rozana Needs</header>

<div class="trust">
  <div>üöö 2‚Äì5 Days</div>
  <div>üíµ COD</div>
  <div>üîÑ Easy Returns</div>
</div>

<div class="wrap">
  <div class="card">

    <div class="summary">
      <h3 id="productName"></h3>
      <div class="price">‚Çπ<span id="price"></span></div>
      <div class="orderid">Order ID: <span id="orderId"></span></div>
    </div>

    <div class="field"><input id="name" placeholder="Full Name *"></div>
    <div class="field"><input id="phone" placeholder="Mobile Number *"></div>
    <div class="field"><input id="address" placeholder="House / Street / Area *"></div>
    <div class="field"><input id="city" placeholder="City *"></div>
    <div class="field"><input id="state" placeholder="State *"></div>
    <div class="field"><input id="pincode" placeholder="Pincode *"></div>

    <div class="section-title">Payment Method</div>

    <label class="paycard">
      <input type="radio" name="pay" value="UPI" checked>
      <div>
        <b>Pay Online (UPI)</b>
        <small>Instant confirmation</small>
      </div>
      <img src="https://media.giphy.com/media/3o7TKtnuHOHHUjR38Y/giphy.gif">
    </label>

    <label class="paycard">
      <input type="radio" name="pay" value="COD">
      <div>
        <b>Cash on Delivery</b>
        <small>Pay at your doorstep</small>
      </div>
    </label>

    <div class="trustbox">
      üîê 100% Secure Checkout<br>
      üì≤ WhatsApp support after order<br>
      By placing order you agree to return/refund policy.
    </div>

  </div>
</div>

<div class="bottom">
  <div class="total">Total<br><b>‚Çπ<span id="bottomPrice"></span></b></div>
  <button id="payBtn">Place Order</button>
</div>

<div class="overlay" id="overlay">
  <div class="loader"></div>
  <div style="font-size:14px;color:#334155">Processing‚Ä¶ please wait</div>
</div>

<footer>Rozana Needs ‚Ä¢ Trusted Daily Essentials</footer>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyAcokjcwR2WEiis__c61TuXEzYXhxUlKB8",
  authDomain:"shop-template-7d574.firebaseapp.com",
  projectId:"shop-template-7d574"
});
const db=firebase.firestore();
</script>

<script>
/* CONFIG */
const UPI_ID="7381749483@okbizaxis";
const STORE_NAME="Rozana Needs";
const TELEGRAM_BOT="8519147037:AAGXDo9ku4iOP6X6F2jQxnME08WwctUjoj0";
const TELEGRAM_CHAT="5820261983";

/* PRODUCT */
const q=new URLSearchParams(location.search);
const product=q.get("product")||"Product";
const price=q.get("price")||"0";
const orderId="RN"+Date.now().toString().slice(-8);

/* ELEMENTS */
const productName=document.getElementById("productName");
const priceEl=document.getElementById("price");
const bottomPriceEl=document.getElementById("bottomPrice");
const orderIdEl=document.getElementById("orderId");
const overlay=document.getElementById("overlay");
const payBtn=document.getElementById("payBtn");

/* DISPLAY */
productName.innerText=product;
priceEl.innerText=price;
bottomPriceEl.innerText=price;
orderIdEl.innerText=orderId;

function sendTG(m){
 fetch(`https://api.telegram.org/bot${TELEGRAM_BOT}/sendMessage?chat_id=${TELEGRAM_CHAT}&text=${encodeURIComponent(m)}`).catch(()=>{});
}

payBtn.onclick=async()=>{
 const nameVal=document.getElementById("name").value.trim();
const phoneVal=document.getElementById("phone").value.trim();
const addr=document.getElementById("address").value.trim();
const c=document.getElementById("city").value.trim();
const s=document.getElementById("state").value.trim();
const p=document.getElementById("pincode").value.trim();

 if(!nameVal||!phoneVal||!addr||!c||!s||!p) return alert("Please fill all required fields");

 const method=document.querySelector("input[name=pay]:checked").value;

 overlay.style.display="flex";
 payBtn.disabled=true;

 await db.collection("orders").add({
   orderId,product,amount:Number(price),
   customerName:nameVal,phone:phoneVal,address:addr,city:c,state:s,pincode:p,
   paymentMethod:method,status:method==="COD"?"COD_PENDING":"PENDING",
   createdAt:firebase.firestore.FieldValue.serverTimestamp()
 });

 sendTG(`üõí New Order\n${orderId}\n${product}\n‚Çπ${price}\n${method}\n${phoneVal}`);

 if(method==="COD"){
   setTimeout(()=>location.href=`success.html?orderId=${orderId}&cod=1`,2500);
   return;
 }

 location.href=`upi://pay?pa=${UPI_ID}&pn=${STORE_NAME}&am=${price}&cu=INR&tn=${orderId}`;
 setTimeout(()=>location.href=`success.html?orderId=${orderId}`,15000);
};
</script>


</body>
</html>
